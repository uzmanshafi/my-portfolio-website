---
phase: 06-animation-polish
plan: 04
type: execute
wave: 2
depends_on: ["06-02", "06-03"]
files_modified:
  - render.yaml
  - src/app/api/health/route.ts
  - package.json
  - .node-version
autonomous: false

must_haves:
  truths:
    - "Health check endpoint returns 200 OK"
    - "render.yaml configured for Web Service deployment"
    - "Node version specified for production"
    - "Application deploys successfully to Render.com"
  artifacts:
    - path: "render.yaml"
      provides: "Render.com deployment configuration"
      contains: "type: web"
    - path: "src/app/api/health/route.ts"
      provides: "Health check endpoint for monitoring"
      exports: ["GET"]
    - path: ".node-version"
      provides: "Node version specification"
      contains: "20"
  key_links:
    - from: "render.yaml"
      to: "src/app/api/health/route.ts"
      via: "healthCheckPath configuration"
      pattern: "healthCheckPath.*api/health"

user_setup:
  - service: render
    why: "Production hosting for Next.js SSR application"
    env_vars:
      - name: DATABASE_URL
        source: "Copy from .env.local or Supabase dashboard"
      - name: AUTH_SECRET
        source: "Copy from .env.local (generate with openssl rand -base64 32)"
      - name: NEXTAUTH_URL
        source: "Your Render deployment URL (e.g., https://portfolio-xxx.onrender.com)"
      - name: SUPABASE_URL
        source: "Copy from .env.local or Supabase dashboard"
      - name: SUPABASE_ANON_KEY
        source: "Copy from .env.local or Supabase dashboard"
      - name: SUPABASE_SERVICE_ROLE_KEY
        source: "Copy from .env.local or Supabase dashboard"
      - name: CRON_SECRET
        source: "Generate with openssl rand -base64 32"
    dashboard_config:
      - task: "Create Web Service from GitHub repo"
        location: "Render Dashboard -> New -> Web Service"
      - task: "Set environment variables"
        location: "Render Dashboard -> Service -> Environment"
---

<objective>
Configure production deployment to Render.com and verify animations work in production.

Purpose: Complete the portfolio by deploying it to a production environment. This validates that all animations work correctly in a production build and the application is accessible to the public.

Output: render.yaml config, health endpoint, successful deployment with all animations working.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-animation-polish/06-RESEARCH.md
@.planning/phases/06-animation-polish/06-02-SUMMARY.md
@.planning/phases/06-animation-polish/06-03-SUMMARY.md
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create health check endpoint and deployment config</name>
  <files>
    src/app/api/health/route.ts,
    render.yaml,
    package.json,
    .node-version
  </files>
  <action>
1. Create health check endpoint at `src/app/api/health/route.ts`:
   ```ts
   export async function GET() {
     return Response.json({ status: "ok", timestamp: new Date().toISOString() });
   }
   ```

2. Create `render.yaml` in project root:
   ```yaml
   services:
     - type: web
       name: portfolio
       runtime: node
       buildCommand: npm install && npm run build
       startCommand: npm start
       envVars:
         - key: NODE_ENV
           value: production
         - key: DATABASE_URL
           sync: false
         - key: AUTH_SECRET
           sync: false
         - key: NEXTAUTH_URL
           sync: false
         - key: SUPABASE_URL
           sync: false
         - key: SUPABASE_ANON_KEY
           sync: false
         - key: SUPABASE_SERVICE_ROLE_KEY
           sync: false
         - key: CRON_SECRET
           sync: false
       disk:
         name: nextjs-cache
         mountPath: /opt/render/project/src/.next/cache
         sizeGB: 1
       healthCheckPath: /api/health
   ```

3. Add engines field to `package.json`:
   ```json
   {
     "engines": {
       "node": ">=20.0.0"
     }
   }
   ```

4. Create `.node-version` file:
   ```
   20
   ```

5. Verify build works locally:
   ```bash
   npm run build
   ```

6. Test health endpoint locally:
   ```bash
   npm run dev &
   curl http://localhost:3000/api/health
   ```
   Should return: `{"status":"ok","timestamp":"..."}`
  </action>
  <verify>
    - Health endpoint exists and returns 200
    - render.yaml is valid YAML
    - package.json has engines.node
    - .node-version contains "20"
    - `npm run build` succeeds
  </verify>
  <done>Deployment configuration ready for Render.com</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete animation system and deployment configuration:
    - Hero entrance animations (shapes scale in, text word-by-word)
    - Scroll-triggered section reveals (About, Skills, Projects, Contact)
    - 3D tilt effect on project cards with shine overlay
    - Skills cascading with stagger
    - Reduced motion support (test with browser devtools)
    - Production deployment config for Render.com
  </what-built>
  <how-to-verify>
    **Local Animation Testing:**

    1. Start dev server: `npm run dev`
    2. Open http://localhost:3000 in browser

    3. **Hero entrance:**
       - Refresh page (Cmd+Shift+R for hard refresh)
       - Geometric shapes should scale in from center
       - Name, title, headline reveal word-by-word
       - CTAs fade in last
       - Total animation: ~1.5-2 seconds

    4. **Scroll animations:**
       - Scroll to About section - image slides from left, text from right
       - Scroll to Skills - heading then categories cascade with cards
       - Scroll to Projects - bento grid cards stagger in
       - Scroll to Contact - elements reveal with stagger
       - Scroll back up - animations don't replay (once only)

    5. **Project card tilt:**
       - Hover over any project card in bento grid
       - Card should tilt toward cursor (5-10 degrees)
       - Subtle shine/glare follows cursor
       - Card lifts with enhanced shadow
       - Move away - card smoothly returns to neutral

    6. **Reduced motion test:**
       - Open DevTools -> Rendering -> Emulate CSS media "prefers-reduced-motion: reduce"
       - Refresh page - all animations should be disabled
       - Content should appear immediately without motion

    7. **Build verification:**
       - Run `npm run build` - should complete without errors
       - Run `npm start` - production server starts
       - Test same animations in production build

    **Production Deployment (if ready):**

    8. Push code to GitHub
    9. In Render Dashboard, create new Web Service from repo
    10. Set environment variables (see user_setup above)
    11. Deploy and wait for health check to pass
    12. Visit production URL and verify animations work

    Note: Deployment is optional - can be done later. Core deliverable is working animations locally.
  </how-to-verify>
  <resume-signal>Type "animations approved" if all animations work correctly, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
- Health check: `curl localhost:3000/api/health` returns 200
- render.yaml validated (Render will validate on deploy)
- Build passes: `npm run build`
- All animations work in dev and production builds
- Reduced motion preference is respected
</verification>

<success_criteria>
- Health endpoint returns { status: "ok" }
- render.yaml configures Web Service with disk for ISR cache
- Node version specified (>=20)
- All animations verified working locally
- (Optional) Successfully deployed to Render.com
- No animation jank or layout shift
- Reduced motion disables all animations
</success_criteria>

<output>
After completion, create `.planning/phases/06-animation-polish/06-04-SUMMARY.md`
</output>
