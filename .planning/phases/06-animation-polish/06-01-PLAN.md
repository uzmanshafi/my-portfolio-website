---
phase: 06-animation-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/components/animation/motion-provider.tsx
  - src/components/animation/animated-section.tsx
  - src/components/animation/animated-text.tsx
  - src/components/animation/tilt-card.tsx
  - src/lib/animation/variants.ts
  - src/app/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Motion package is installed and importable"
    - "Animation components are available for use throughout app"
    - "MotionProvider wraps app with reducedMotion='user' setting"
  artifacts:
    - path: "src/components/animation/motion-provider.tsx"
      provides: "Global motion configuration with reduced motion support"
      exports: ["MotionProvider"]
    - path: "src/components/animation/animated-section.tsx"
      provides: "Scroll-triggered reveal wrapper"
      exports: ["AnimatedSection"]
    - path: "src/components/animation/animated-text.tsx"
      provides: "Word-by-word text reveal"
      exports: ["AnimatedText"]
    - path: "src/components/animation/tilt-card.tsx"
      provides: "3D tilt effect with shine overlay"
      exports: ["TiltCard"]
    - path: "src/lib/animation/variants.ts"
      provides: "Shared animation variants and spring configs"
      exports: ["revealVariants", "staggerContainer", "itemVariants", "snappySpring"]
  key_links:
    - from: "src/app/layout.tsx"
      to: "src/components/animation/motion-provider.tsx"
      via: "Provider wrapping children"
      pattern: "<MotionProvider>"
---

<objective>
Install Motion for React and create reusable animation components for the portfolio.

Purpose: Establish animation infrastructure that respects accessibility (prefers-reduced-motion) and provides consistent, snappy physics-based animations across all sections.

Output: Motion package installed, 4 animation components ready for use, centralized animation variants, and MotionProvider wrapping the app.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-animation-polish/06-RESEARCH.md
@src/app/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Motion package and create shared variants</name>
  <files>package.json, src/lib/animation/variants.ts</files>
  <action>
1. Install the motion package:
   ```bash
   npm install motion
   ```

2. Create `src/lib/animation/variants.ts` with centralized animation configuration:

   - `revealVariants`: For scroll-triggered reveals
     - hidden: { opacity: 0, y: 40 }
     - visible: { opacity: 1, y: 0, transition: { duration: 0.35, ease: "easeOut" } }

   - `staggerContainer`: Parent variant for staggered children
     - hidden: { opacity: 0 }
     - visible: { opacity: 1, transition: { staggerChildren: 0.06, delayChildren: 0 } }

   - `itemVariants`: For individual items in staggered animations
     - hidden: { opacity: 0, y: 30 }
     - visible: { opacity: 1, y: 0, transition: { duration: 0.3, ease: "easeOut" } }

   - `snappySpring`: Spring config with no overshoot
     - { type: "spring", stiffness: 300, damping: 30 }

   - `viewportConfig`: Standard viewport settings
     - { once: true, amount: 0.5 }

Export all variants as named exports.
  </action>
  <verify>
    - `npm list motion` shows motion package installed
    - `src/lib/animation/variants.ts` exists with all exports
  </verify>
  <done>Motion package installed, animation variants centralized in variants.ts</done>
</task>

<task type="auto">
  <name>Task 2: Create animation components</name>
  <files>
    src/components/animation/motion-provider.tsx,
    src/components/animation/animated-section.tsx,
    src/components/animation/animated-text.tsx,
    src/components/animation/tilt-card.tsx
  </files>
  <action>
Create the `src/components/animation/` directory with 4 components:

1. **motion-provider.tsx** (client component):
   - Wraps children with `<MotionConfig reducedMotion="user">`
   - This respects system prefers-reduced-motion setting
   - Simple wrapper, no other logic needed

2. **animated-section.tsx** (client component):
   - Props: children, className?, delay?
   - Uses motion.div with whileInView trigger
   - Import revealVariants and viewportConfig from variants.ts
   - Apply initial="hidden", whileInView="visible"
   - If delay prop provided, add transition.delay

3. **animated-text.tsx** (client component):
   - Props: text, className?, as? (default "span"), staggerDelay? (default 0.08), delay?
   - Split text by spaces into words
   - Render as motion element (motion.span, motion.h1, etc based on `as` prop)
   - Parent: stagger container with staggerChildren
   - Each word: inline-block motion.span with reveal animation
   - Add mr-[0.25em] spacing between words
   - Support delay prop for choreography (e.g., text starts after shapes)

4. **tilt-card.tsx** (client component):
   - Props: children, className?, maxTilt? (default 8)
   - Use useMotionValue for x, y mouse position (0-1 range)
   - Use useSpring with snappySpring config for rotateX, rotateY
   - Transform: x [0,1] -> rotateY [-maxTilt, maxTilt], y [0,1] -> rotateX [maxTilt, -maxTilt]
   - Add shine effect: radial-gradient overlay that follows cursor
   - whileHover: scale 1.02, enhanced shadow
   - onMouseLeave: reset x,y to 0.5 (center position)
   - Disable tilt on touch devices (check for pointer: coarse media query or skip mouse handlers)
   - Apply position: relative for shine overlay positioning

Import motion, useMotionValue, useSpring, useTransform from "motion/react".
  </action>
  <verify>
    - All 4 component files exist in src/components/animation/
    - Each has "use client" directive
    - TypeScript compiles without errors: `npx tsc --noEmit`
  </verify>
  <done>Four animation components created: MotionProvider, AnimatedSection, AnimatedText, TiltCard</done>
</task>

<task type="auto">
  <name>Task 3: Integrate MotionProvider into app layout</name>
  <files>src/app/layout.tsx</files>
  <action>
1. Import MotionProvider from "@/components/animation/motion-provider"

2. Wrap the body children with MotionProvider:
   ```tsx
   <body ...>
     <MotionProvider>
       {children}
       <Toaster ... />
     </MotionProvider>
   </body>
   ```

Note: Keep Toaster inside MotionProvider so any toast animations also respect reduced motion.
  </action>
  <verify>
    - `npm run build` succeeds
    - `npm run dev` starts without errors
    - Inspect browser DevTools: MotionConfig should be in React component tree
  </verify>
  <done>MotionProvider integrated into root layout, all animations will respect prefers-reduced-motion</done>
</task>

</tasks>

<verification>
- Motion package in dependencies: `npm list motion`
- Animation components exist and export correctly
- App builds without errors: `npm run build`
- No TypeScript errors: `npx tsc --noEmit`
</verification>

<success_criteria>
- Motion ^12.x installed
- 4 animation components created and typed
- Centralized variants in src/lib/animation/variants.ts
- MotionProvider wrapping app, reducedMotion="user" configured
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/06-animation-polish/06-01-SUMMARY.md`
</output>
