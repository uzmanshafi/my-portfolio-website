---
phase: 10-loading-states
plan: 02
type: execute
wave: 2
depends_on: ["10-01"]
files_modified:
  - src/app/loading.tsx
  - src/app/components/portfolio/geometric-shapes.tsx
autonomous: false

must_haves:
  truths:
    - "During initial page load, skeleton shapes appear instead of blank page"
    - "Skeleton layout matches actual page sections (hero, about, skills, projects, contact)"
    - "Geometric shapes visible during loading (static, no animation)"
    - "Skeleton has visible shimmer animation indicating loading in progress"
    - "Navigation dots skeleton visible on desktop during loading"
  artifacts:
    - path: "src/app/loading.tsx"
      provides: "Route-level skeleton composing all section skeletons"
      exports: ["default"]
      min_lines: 20
  key_links:
    - from: "src/app/loading.tsx"
      to: "src/components/skeletons/*.tsx"
      via: "import and render"
      pattern: "import.*from.*skeletons"
    - from: "src/app/loading.tsx"
      to: "src/app/components/portfolio/geometric-shapes.tsx"
      via: "import StaticGeometricShapes"
      pattern: "StaticGeometricShapes"
---

<objective>
Create the route-level loading.tsx that composes all skeleton components into a complete loading state matching the portfolio page structure.

Purpose: When Next.js serves the initial page render, loading.tsx displays skeleton placeholders that precisely mirror the real page layout, providing a smooth visual transition and reducing perceived load time.

Output: loading.tsx file that renders skeleton version of entire portfolio page including geometric shapes.
</objective>

<execution_context>
@/Users/uzi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/uzi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/10-loading-states/10-CONTEXT.md
@.planning/phases/10-loading-states/10-01-SUMMARY.md

# Reference for page structure:
@src/app/page.tsx
@src/app/components/portfolio/section-wrapper.tsx
@src/app/components/portfolio/section-divider.tsx
@src/app/components/portfolio/geometric-shapes.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create static geometric shapes variant</name>
  <files>src/app/components/portfolio/geometric-shapes.tsx</files>
  <action>
Add a StaticGeometricShapes export to geometric-shapes.tsx for use during loading state.

The static version should:
1. Export a new `StaticGeometricShapes` function component
2. Render the same shapes as `GeometricShapes` but WITHOUT motion/animation
3. Use fixed opacity values (final state) instead of animating from 0
4. No `motion.div`, just regular `div` elements

Pattern:
```tsx
/**
 * Static version of geometric shapes for loading state.
 * Renders shapes at their final opacity without animation.
 * Used in loading.tsx to show shapes during skeleton state.
 */
export function StaticGeometricShapes() {
  return (
    <div
      className="absolute inset-0 overflow-hidden pointer-events-none"
      aria-hidden="true"
    >
      {/* Large primary circle - top right with glow */}
      <div
        className="absolute -top-32 -right-32 w-96 h-96 rounded-full blur-3xl"
        style={{ backgroundColor: "var(--color-primary)", opacity: 0.15 }}
      />
      {/* ... rest of shapes with their final opacity values ... */}
    </div>
  );
}
```

Copy all shapes from the animated version, but:
- Replace `motion.div` with `div`
- Remove `variants` prop
- Set opacity directly in style (use the targetOpacity values from createShapeVariants calls)
- Keep exact positioning classes

Keep the existing animated `GeometricShapes` export unchanged - both exports coexist.
  </action>
  <verify>
File exports both `GeometricShapes` and `StaticGeometricShapes`. TypeScript compiles without errors. StaticGeometricShapes renders same visual layout as final state of animated version.
  </verify>
  <done>
geometric-shapes.tsx exports both animated GeometricShapes (existing) and new StaticGeometricShapes (static version for loading state) with identical layout but no animation.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create route-level loading.tsx</name>
  <files>src/app/loading.tsx</files>
  <action>
Create loading.tsx at src/app/loading.tsx that composes all skeleton components.

Structure must mirror src/app/page.tsx exactly:
1. Import all skeleton components from src/components/skeletons/
2. Import StaticGeometricShapes from geometric-shapes.tsx
3. Import SectionWrapper and SectionDivider for consistent layout

```tsx
import { SectionWrapper } from "@/app/components/portfolio/section-wrapper";
import { SectionDivider } from "@/app/components/portfolio/section-divider";
import { StaticGeometricShapes } from "@/app/components/portfolio/geometric-shapes";
import { SectionNavSkeleton } from "@/components/skeletons/section-nav-skeleton";
import { HeroSkeleton } from "@/components/skeletons/hero-skeleton";
import { AboutSkeleton } from "@/components/skeletons/about-skeleton";
import { SkillsSkeleton } from "@/components/skeletons/skills-skeleton";
import { ProjectsSkeleton } from "@/components/skeletons/projects-skeleton";
import { ContactSkeleton } from "@/components/skeletons/contact-skeleton";

/**
 * Route-level loading state for public portfolio.
 * Displays skeleton placeholders matching exact page layout.
 * Next.js automatically wraps page.tsx with Suspense using this component.
 */
export default function Loading() {
  return (
    <main className="relative">
      <SectionNavSkeleton />

      <SectionWrapper id="hero" className="relative overflow-hidden">
        <StaticGeometricShapes />
        <HeroSkeleton />
      </SectionWrapper>

      <SectionDivider className="my-8 md:my-12" />

      <SectionWrapper id="about">
        <AboutSkeleton />
      </SectionWrapper>

      <SectionDivider className="my-8 md:my-12" />

      <SectionWrapper id="skills">
        <SkillsSkeleton />
      </SectionWrapper>

      <SectionDivider className="my-8 md:my-12" />

      <SectionWrapper id="projects">
        <ProjectsSkeleton />
      </SectionWrapper>

      <SectionDivider className="my-8 md:my-12" />

      <SectionWrapper id="contact">
        <ContactSkeleton />
      </SectionWrapper>
    </main>
  );
}
```

Key requirements:
- Use same SectionWrapper ids as page.tsx for consistent structure
- Include SectionDividers between sections (same spacing classes)
- Geometric shapes in hero section (static version)
- No JsonLd in loading state (SEO data not needed for skeleton)
  </action>
  <verify>
File exists at src/app/loading.tsx. Exports default function. Imports match skeleton component paths. Structure mirrors page.tsx with same section order and dividers. `npm run build` succeeds.
  </verify>
  <done>
loading.tsx created composing all skeleton components in exact same structure as page.tsx, with static geometric shapes in hero section, section wrappers with matching IDs, and dividers between sections.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete skeleton loading state for public portfolio:
- Shimmer animation CSS with accent color
- 6 skeleton components matching real page layout
- loading.tsx composing full page skeleton
- Static geometric shapes visible during load
  </what-built>
  <how-to-verify>
1. Start dev server: `npm run dev`
2. Open browser DevTools -> Network tab
3. Set "Throttling" to "Slow 3G" to simulate slow connection
4. Navigate to http://localhost:3000

Verify:
- [ ] Skeleton shapes appear during initial load (not blank/spinner)
- [ ] Skeleton layout matches page sections (hero area, about grid, skills grid, projects bento, contact center)
- [ ] Skeleton uses purple/violet tint (accent color), NOT gray
- [ ] Shimmer wave sweeps diagonally across all elements in sync
- [ ] Geometric shapes (blurred circles, lines) visible in hero area
- [ ] Side navigation dots appear on desktop (right side)
- [ ] When content loads, transition from skeleton to real content is smooth (no jarring jump)

Optional reduced motion test:
- Enable "Reduce motion" in System Preferences/Settings
- Reload page - shimmer should NOT animate (static skeleton)
  </how-to-verify>
  <resume-signal>Type "approved" if skeleton loading works correctly, or describe any issues with layout, colors, or animation</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm run build` succeeds
2. loading.tsx exists and exports default function
3. StaticGeometricShapes exported from geometric-shapes.tsx
4. Visual verification confirms skeleton matches page layout
5. Shimmer animation visible on slow connection
</verification>

<success_criteria>
- loading.tsx renders skeleton version of entire portfolio page
- Geometric shapes visible during loading (static, not animated)
- Skeleton structure matches page.tsx structure exactly
- User sees skeleton instead of blank page during initial load
- Shimmer animation creates premium loading feel
- Reduced motion respected (static skeleton for accessibility)
</success_criteria>

<output>
After completion, create `.planning/phases/10-loading-states/10-02-SUMMARY.md`
</output>
