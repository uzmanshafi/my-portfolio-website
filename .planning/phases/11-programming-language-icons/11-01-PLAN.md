---
phase: 11-programming-language-icons
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - prisma/schema.prisma
  - src/lib/validations/skill.ts
  - src/lib/icons/devicon-registry.ts
  - src/lib/icons/icon-categories.ts
  - package.json
autonomous: true

must_haves:
  truths:
    - "devicons-react package is installed and importable"
    - "Skill model has iconType and iconId fields for dual icon system"
    - "Static registry exports all available devicons with categories and aliases"
    - "Category fallback mapping provides Lucide icons for each skill category"
  artifacts:
    - path: "src/lib/icons/devicon-registry.ts"
      provides: "Static mapping of 80+ tech icons with categories and aliases"
      exports: ["DEVICON_REGISTRY", "DEVICON_MAP", "DeviconEntry", "IconCategory"]
    - path: "src/lib/icons/icon-categories.ts"
      provides: "Category fallback mapping to Lucide icons"
      exports: ["CATEGORY_FALLBACKS", "DEVICON_CATEGORIES"]
    - path: "prisma/schema.prisma"
      provides: "Updated Skill model with iconType and iconId fields"
      contains: "iconType"
  key_links:
    - from: "src/lib/icons/devicon-registry.ts"
      to: "devicons-react/icons/*"
      via: "individual imports for tree-shaking"
      pattern: "from \"devicons-react/icons/"
---

<objective>
Set up devicons-react package, create static icon registry with categories/aliases, and migrate Skill schema to support dual icon system (devicon or Lucide).

Purpose: Establish the foundation for tech icons - the registry and schema must exist before any UI components can render them.
Output: Installed devicons-react, static registry with 80+ icons, updated Prisma schema with migration.
</objective>

<execution_context>
@/Users/uzi/.claude/get-shit-done/workflows/execute-plan.md
@/Users/uzi/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-programming-language-icons/11-CONTEXT.md
@.planning/phases/11-programming-language-icons/11-RESEARCH.md
@prisma/schema.prisma
@src/lib/validations/skill.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install devicons-react and create icon registry</name>
  <files>package.json, src/lib/icons/devicon-registry.ts, src/lib/icons/icon-categories.ts</files>
  <action>
    1. Install devicons-react: `npm install devicons-react`

    2. Create src/lib/icons/devicon-registry.ts with static registry:
       - Import icons INDIVIDUALLY from "devicons-react/icons/[IconName]" for tree-shaking (never use named imports from main package)
       - Use Plain variants with color="currentColor" for monochrome design
       - Define IconCategory type: "languages" | "frameworks" | "databases" | "cloud" | "devops" | "tools"
       - Define DeviconEntry interface: { name, id, component, category, aliases[] }
       - Export DEVICON_REGISTRY array with 80+ icons covering:
         - Languages (15+): JavaScript, TypeScript, Python, Java, C, C++, C#, Go, Rust, Ruby, PHP, Swift, Kotlin, Scala, R
         - Frameworks (20+): React, Vue, Angular, Svelte, Next.js, Node.js, Express, Django, Flask, FastAPI, Spring, Rails, Laravel, .NET
         - Databases (10+): PostgreSQL, MySQL, MongoDB, Redis, SQLite, Elasticsearch, Firebase, Supabase
         - Cloud (8+): AWS, GCP, Azure, Vercel, Netlify, Cloudflare, DigitalOcean, Heroku
         - DevOps (10+): Docker, Kubernetes, Git, GitHub, GitLab, Jenkins, Terraform, Ansible, Linux, Bash
         - Tools (15+): VS Code, Vim, Figma, Postman, Webpack, Vite, npm, Yarn, Jest, Cypress, GraphQL, REST, Tailwind, Sass
       - Export DEVICON_MAP: Map<string, DeviconEntry> for O(1) lookup by id
       - Include common aliases for each icon (e.g., React: ["reactjs", "react.js"], TypeScript: ["ts"], PostgreSQL: ["postgres", "psql"])

    3. Create src/lib/icons/icon-categories.ts:
       - Import Lucide icons: Code, Server, Database, Cloud, Container, Wrench from lucide-react
       - Export CATEGORY_FALLBACKS mapping SkillCategory to Lucide icon:
         - frontend -> Code
         - backend -> Server
         - tools -> Wrench
         - other -> Code
       - Export DEVICON_CATEGORIES array for picker UI tabs: [
           { value: "all", label: "All" },
           { value: "languages", label: "Languages" },
           { value: "frameworks", label: "Frameworks" },
           { value: "databases", label: "Databases" },
           { value: "cloud", label: "Cloud" },
           { value: "devops", label: "DevOps" },
           { value: "tools", label: "Tools" }
         ]
  </action>
  <verify>
    - `npm ls devicons-react` shows installed
    - TypeScript compiles without errors: `npx tsc --noEmit`
    - Registry exports are accessible: Add temp import in any file to verify
  </verify>
  <done>
    - devicons-react installed in package.json
    - DEVICON_REGISTRY exports 80+ icons with categories and aliases
    - DEVICON_MAP provides O(1) lookup by id
    - CATEGORY_FALLBACKS maps SkillCategory to Lucide icons
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate Skill schema for dual icon system</name>
  <files>prisma/schema.prisma, src/lib/validations/skill.ts</files>
  <action>
    1. Update prisma/schema.prisma Skill model:
       - Rename `icon` field to `iconId` (keeps existing Lucide icon names for backwards compat)
       - Add `iconType` field: String @default("lucide") - values: "devicon" | "lucide"
       - Keep iconId as String (not optional) - always has a value (devicon id or lucide name)

       ```prisma
       model Skill {
         id        String   @id @default(cuid())
         name      String
         iconType  String   @default("lucide")  // "devicon" | "lucide"
         iconId    String   @default("code")    // devicon id or lucide icon name
         category  String   // "frontend", "backend", "tools", "other"
         order     Int      @default(0)
         visible   Boolean  @default(true)
         createdAt DateTime @default(now())
         updatedAt DateTime @updatedAt

         @@index([category])
         @@index([order])
       }
       ```

    2. Run migration:
       - `npx prisma db push` (or `npm run db:push`) to apply schema change
       - This renames icon -> iconId and adds iconType with "lucide" default
       - Existing skills keep their Lucide icon names and get iconType="lucide"

    3. Update src/lib/validations/skill.ts:
       - Replace `icon` field with `iconType` and `iconId`:
         ```typescript
         export const skillSchema = z.object({
           name: z.string().min(1, "Name is required").max(50, "Name must be 50 characters or less"),
           iconType: z.enum(["devicon", "lucide"]).default("lucide"),
           iconId: z.string().min(1, "Icon is required").max(50, "Icon ID must be 50 characters or less"),
           category: z.enum(["frontend", "backend", "tools", "other"], {
             error: "Please select a valid category",
           }),
         });
         ```
       - Update SkillFormData type export
  </action>
  <verify>
    - `npm run db:push` completes without errors
    - Prisma client regenerated: Check src/generated/prisma/client has updated Skill type
    - Validation schema compiles: `npx tsc --noEmit`
  </verify>
  <done>
    - Skill model has iconType and iconId fields
    - Existing skills migrated with iconType="lucide" default
    - Validation schema updated to match new fields
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `npm ls devicons-react` shows version installed
2. `npx tsc --noEmit` passes with no type errors
3. `npx prisma db push` shows no pending changes
4. Registry exports DEVICON_REGISTRY with 80+ entries
5. DEVICON_MAP.get("react") returns React devicon entry
</verification>

<success_criteria>
- devicons-react installed and tree-shakeable imports work
- Skill schema has iconType ("devicon"|"lucide") and iconId fields
- Static registry contains 80+ icons with categories and aliases
- Category fallback mapping provides Lucide icons for each skill category
- All existing skills preserved with iconType="lucide" default
</success_criteria>

<output>
After completion, create `.planning/phases/11-programming-language-icons/11-01-SUMMARY.md`
</output>
