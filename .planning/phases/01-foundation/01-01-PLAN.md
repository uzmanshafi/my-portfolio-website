---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - next.config.ts
  - postcss.config.mjs
  - src/app/layout.tsx
  - src/app/page.tsx
  - src/app/globals.css
  - docker-compose.yml
  - .env.local
  - .env.example
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "Next.js dev server starts without errors"
    - "PostgreSQL container runs and accepts connections"
    - "Tailwind CSS classes compile and apply correctly"
    - "Environment variables are loaded from .env.local"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies and scripts"
      contains: "next"
    - path: "src/app/layout.tsx"
      provides: "Root layout with html and body"
      exports: ["default"]
    - path: "src/app/page.tsx"
      provides: "Home page component"
      exports: ["default"]
    - path: "docker-compose.yml"
      provides: "PostgreSQL container configuration"
      contains: "postgres:16"
    - path: ".env.local"
      provides: "Local environment variables"
      contains: "DATABASE_URL"
  key_links:
    - from: "src/app/globals.css"
      to: "tailwindcss"
      via: "@import directive"
      pattern: '@import "tailwindcss"'
    - from: "postcss.config.mjs"
      to: "@tailwindcss/postcss"
      via: "PostCSS plugin"
      pattern: "@tailwindcss/postcss"
---

<objective>
Create Next.js 15 project with TypeScript, Tailwind CSS 4, and local PostgreSQL database via Docker.

Purpose: Establish the foundational project structure and local development database that all future phases build upon.
Output: Running Next.js dev server and PostgreSQL container ready for Prisma integration.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Next.js 15 Project</name>
  <files>
    package.json
    tsconfig.json
    next.config.ts
    postcss.config.mjs
    src/app/layout.tsx
    src/app/page.tsx
    src/app/globals.css
    src/app/not-found.tsx
  </files>
  <action>
Create a new Next.js 15 project in the current directory. The existing files (build/, src/input.css, old tailwind.config.js) will be replaced.

1. Run create-next-app with these options:
   ```bash
   npx create-next-app@15 . --typescript --tailwind --eslint --app --src-dir --import-alias "@/*" --use-npm --yes
   ```
   Note: Use `--yes` to accept defaults. If prompted about existing files, allow overwrite.

2. After creation, update package.json:
   - Add `"type": "module"` for ESM compatibility (required for Prisma 7)
   - Verify scripts include dev, build, start, lint

3. Update postcss.config.mjs for Tailwind 4:
   ```javascript
   const config = {
     plugins: {
       "@tailwindcss/postcss": {},
     },
   };
   export default config;
   ```

4. Update src/app/globals.css for Tailwind 4 CSS-first config:
   ```css
   @import "tailwindcss";

   /* Design system colors from PROJECT.md */
   :root {
     --color-text: #f3e9e2;
     --color-background: #160f09;
     --color-primary: #d3b196;
     --color-secondary: #326978;
     --color-accent: #6655b8;
   }
   ```

5. Create a minimal src/app/page.tsx that confirms the setup works:
   - Display "Portfolio Foundation" heading
   - Use Tailwind classes to verify CSS is working
   - Apply the design system colors as a visual test

6. Update src/app/layout.tsx:
   - Set appropriate metadata (title: "Portfolio", description)
   - Import globals.css
   - Apply dark background color class to body

7. Create src/app/not-found.tsx with a simple 404 page.

8. Delete old files that are no longer needed:
   - build/ directory (old static site)
   - src/input.css (replaced by globals.css)
   - tailwind.config.js (Tailwind 4 uses CSS-first config)
  </action>
  <verify>
Run `npm run dev` and verify:
- Server starts on http://localhost:3000
- Page renders without errors
- Tailwind classes apply correctly (check background color, text styling)
  </verify>
  <done>
Next.js 15 dev server runs successfully with Tailwind 4 CSS compiling and design system colors visible.
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure Docker Compose for PostgreSQL</name>
  <files>
    docker-compose.yml
  </files>
  <action>
Create docker-compose.yml for local PostgreSQL development:

```yaml
version: '3.8'

services:
  postgres:
    image: postgres:16-alpine
    container_name: portfolio-db
    restart: unless-stopped
    environment:
      POSTGRES_DB: portfolio
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
    ports:
      - '5432:5432'
    volumes:
      - postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres -d portfolio"]
      interval: 5s
      timeout: 2s
      retries: 10

volumes:
  postgres_data:
```

Add npm scripts to package.json for database management:
```json
"db:up": "docker compose up -d",
"db:down": "docker compose down",
"db:logs": "docker compose logs -f postgres"
```
  </action>
  <verify>
Run `npm run db:up` and verify:
- Container starts successfully
- `docker compose ps` shows postgres running and healthy
- Port 5432 is accessible
  </verify>
  <done>
PostgreSQL 16 container runs locally with persistent volume and health check passing.
  </done>
</task>

<task type="auto">
  <name>Task 3: Set Up Environment Files</name>
  <files>
    .env.local
    .env.example
    .gitignore
  </files>
  <action>
1. Create .env.local (git-ignored) with local database connection:
   ```
   # PostgreSQL connection (Docker local)
   DATABASE_URL="postgresql://postgres:postgres@localhost:5432/portfolio?schema=public"
   ```

2. Create .env.example (committed) as template:
   ```
   # PostgreSQL connection
   # For local development with Docker: postgresql://postgres:postgres@localhost:5432/portfolio?schema=public
   # For production: postgresql://user:password@host:5432/database?sslmode=require
   DATABASE_URL="postgresql://user:password@localhost:5432/portfolio?schema=public"
   ```

3. Update .gitignore to ensure these patterns are present:
   ```
   # Environment
   .env
   .env.local
   .env*.local

   # Dependencies
   node_modules/

   # Next.js
   .next/
   out/

   # Prisma
   src/generated/

   # Docker
   postgres_data/
   ```

4. Verify .env.local is NOT tracked by git:
   ```bash
   git status --ignored
   ```
  </action>
  <verify>
- .env.local exists with DATABASE_URL
- .env.example exists and is NOT git-ignored
- `git status` does not show .env.local as tracked
  </verify>
  <done>
Environment configuration is set up with local database URL and proper git-ignore patterns.
  </done>
</task>

</tasks>

<verification>
Run these commands to verify the plan is complete:

```bash
# 1. Next.js dev server starts
npm run dev &
sleep 5
curl -s http://localhost:3000 | head -20
kill %1

# 2. PostgreSQL container is running
npm run db:up
docker compose ps
docker compose exec postgres pg_isready -U postgres -d portfolio

# 3. Environment files exist
test -f .env.local && echo ".env.local exists"
test -f .env.example && echo ".env.example exists"

# 4. Git ignore is working
git check-ignore .env.local && echo ".env.local is ignored"
```
</verification>

<success_criteria>
- Next.js 15 dev server starts on port 3000 without errors
- Tailwind CSS classes compile and apply (design system colors visible)
- PostgreSQL container runs and accepts connections on port 5432
- Environment files properly configured and git-ignored
- Project structure follows Next.js 15 App Router conventions
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
